{% extends 'staff_dashboard_layout.html' %}
{% load humanize %}
{% block title %}Transactions - Arhan Financial{% endblock %}
{% block page_heading %}Transaction{% endblock %}

{% block extra_css %}
<style>
    /* Toolbar */
    .trans-toolbar {
        display: flex; justify-content: space-between; align-items: center; 
        margin-bottom: 25px; /* More space */
    }
    .action-btn-group { display: flex; gap: 10px; }
    .btn-outline {
        border: 1px solid var(--border-light); background: var(--bg-white); 
        padding: 8px 16px; border-radius: 12px; color: var(--secondary-text); 
        cursor: pointer; font-size: 0.9rem; display: flex; align-items: center; 
        gap: 8px; transition: all 0.2s;
    }
    .btn-outline:hover { border-color: var(--primary-green); color: var(--primary-green); }

    /* Data Table Styling */
    .table-container { 
        background: var(--bg-white); 
        border-radius: 20px; 
        box-shadow: var(--shadow-card); 
        padding: 25px; 
        overflow-x: auto; 
    }
    
    .custom-table { 
        width: 100%; /* FORCE FULL WIDTH */
        border-collapse: collapse; 
        white-space: nowrap; /* Prevents awkward wrapping */
    }
    
    .custom-table th { 
        text-align: left; padding: 15px; color: var(--secondary-text); 
        font-weight: 600; font-size: 0.85rem; 
        border-bottom: 1px solid var(--border-light); 
        text-transform: uppercase; letter-spacing: 0.5px;
    }
    
    .custom-table td { 
        padding: 15px; color: var(--primary-dark); 
        border-bottom: 1px solid var(--border-light); 
        vertical-align: middle; 
        font-size: 0.95rem;
    }
    
    /* Column Width Controls - Spreads columns evenly */
    .col-sender { width: 20%; }
    .col-recipient { width: 20%; }
    .col-amount { width: 15%; }
    .col-type { width: 15%; }
    .col-date { width: 15%; }
    
    .icon-box { 
        width: 35px; height: 35px; border-radius: 8px; 
        display: flex; align-items: center; justify-content: center; 
        margin-right: 12px; font-size: 0.9rem;
    }
    
    .status-badge { 
        padding: 5px 12px; border-radius: 20px; 
        font-size: 0.75rem; font-weight: 600; display: inline-block; 
    }
    .status-confirm { background-color: #E7F8F0; color: var(--primary-green); }
    .status-pending { background-color: #FFF6E6; color: #FFB37B; }
    
    .custom-checkbox { 
        width: 18px; height: 18px; accent-color: var(--primary-green); cursor: pointer; 
    }

    .table-container {
        overflow-x: auto; /* Allows horizontal scroll on mobile */
        -webkit-overflow-scrolling: touch; /* Smooth scroll on iOS */
    }
</style>
{% endblock %}

{% block content %}
<div class="dashboard-grid">
    <div class="col-span-4"> <div class="trans-toolbar">
            <h3 style="font-size: 1.3rem; font-weight: 700;">Recent Transactions</h3>
            <div class="action-btn-group">
                <button class="btn-outline"><i class="fas fa-print"></i> Print</button>
                <button class="btn-outline"><i class="fas fa-filter"></i> Filter</button>
                <button class="btn-outline"><i class="fas fa-download"></i> Download</button>
            </div>
        </div>

        <div class="table-container">
            <table class="custom-table">
                <thead>
                    <tr>
                        <th style="width: 50px;"><input type="checkbox" class="custom-checkbox"></th>
                        <th class="col-sender">Sender</th>
                        <th class="col-recipient">Recipient</th>
                        <th class="col-amount">Amount</th>
                        <th class="col-type">Payment Type</th>
                        <th class="col-date">Date</th>
                        <th>Status</th>
                        <th></th> </tr>
                </thead>
                <tbody>
                    {% for transaction in transactions %}
                        <tr>
                            <td><input type="checkbox" class="custom-checkbox"></td>
                            <td>
                                <div class="flex items-center">
                                    
                                    <span style="font-weight: 600;">{{ transaction.sender }}</span>
                                </div>
                            </td>
                            <td class="text-gray">{{ transaction.recipient }}</td>
                            <td style="font-weight: 600;">â‚¦{{ transaction.amount|intcomma }}</td>
                            
                            <td>
                                <span class="status-badge status-confirm">
                                    {{ transaction.payment_type }}
                                </span>
                            </td>
                            
                            <td class="text-gray">{{ transaction.date }}</td>
                            
                            <td>
                                <span class="status-badge {% if transaction.status == 'Pending' %}status-pending{% else %}status-confirm{% endif %}">
                                    {{ transaction.status }}
                                </span>
                            </td>
                            <td class="text-gray" style="text-align: right;">
                                <i class="fas fa-ellipsis-h" style="cursor: pointer;"></i>
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="8" style="text-align: center; padding: 40px; color: #999;">
                                No transactions found.
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}